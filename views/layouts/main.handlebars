<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css">-->
  {{!-- <meta http-equiv="Content-Security-Policy" content="default-src gap://ready file://* *; style-src 'self' http://* https://* 'unsafe-inline'; script-src 'self' http://* https://* 'unsafe-inline' 'unsafe-eval'"> --}}
  <link rel="stylesheet" href="/styles/styles.css" media="screen" title="no title" charset="utf-8">
  <title>Home Page</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
  <!-- Bootstrap core CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.2/css/mdb.min.css" rel="stylesheet">
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="Stylesheet"
    type="text/css" />

</head>


<body>
  <header>
    {{>header}}
  </header>
  {{{body}}}
  <footer>
    {{>footer}}
  </footer>
  <!-- JQuery -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.2/js/mdb.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js" type="text/javascript"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js" type="text/javascript"></script>
  <script>
    $(document).ready(function () {
      //$('.datepicker').datepicker();

      $('#company_1').keyup(function (event) {
        event.preventDefault();
        $("#companySug").empty();
        var truefalse = true;
        console.log("h");
        var selected = "";
        var company = $("#company_1").val().trim();
        console.log(company);
        $.ajax({
          type: "GET",
          url: "https://autocomplete.clearbit.com/v1/companies/suggest?query=" + company,
          async: true,
          dataType: "json",
          success: function (response) {
            var outArr = [];
            console.log(response);
            //console.log(response[0]);
            //console.log(response.length);
            for (var x = 0; x < response.length; x++) {
              //console.log(response[x].name);
              var div = $("<div>");
              $("#companySug").append(div);
              div.text(response[x].name);
              div.attr("data-name", response[x].name);
              div.addClass("companySug");

            }
            $(".companySug").off();
            $(".companySug").on("click", function (event) {
              if (truefalse === true) {
                event.preventDefault();
                console.log("hola");
                selected = $(this).attr("data-name");
                $('.company').text(selected);
                // var selected = $(this).val();
                //console.log($(this));
                console.log("selected " + selected);
                truefalse = false;
              }
              else {
                console.log("not");
              }
            })
          },
          error: function (xhr, status, err) {
            // This time, we do not end up here!

          }
        });
      });

      $("#addTask").off();
      $("#addTask").on("click", function (event) {
        event.preventDefault();
        var lastId = $('div[id^="task"]:last');
        var num = parseInt(lastId.prop("id").match(/\d+/g), 10) + 1;
        var taskClone = $(".clone-task").clone(true).prop('id', 'task' + num);
        taskClone.insertBefore("#addTask");
        taskClone.show();
        taskClone.attr("name", "task" + num);
        taskClone.removeClass("clone-task");

      });

      $("#printPDF").off();
      $("#printPDF").on("click", function (event) {
        event.preventDefault();
        console.log("hola");
        var currentLocation = location.href;
        console.log(currentLocation);
        var printya = $("#printYa").html();
        $.ajax({
          type: "POST",
          url: "https://v2018.api2pdf.com/chrome/url",
          headers: {
            "accept": "application/json",
            "Authorization": "591b4741-015b-40c1-a51c-21e77ce15bbb",
            "Content-Type": "application/json"
          },
          async: false,
          dataType: "json",
          data: JSON.stringify({
            "html": printya,
            "inlinePdf": true,
            "fileName": "test.pdf",
            "options": {
              "landscape": "true",
              "printBackground": false
            }
          }),

          success: function (response) {
            console.log(response);

          },
          error: function (xhr, status, err) {
            // This time, we do not end up here!
            console.log(err);

          }
        });
      });
    });

  </script>
</body>

</html>